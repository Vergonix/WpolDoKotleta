<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>WpólDoKotleta</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    </head>
    <body ng-app="myApp" ng-controller="myCtrl">
        <div class="jumbotron">
            <div class="container text-center">
                <h1>WpółDoKotleta</h1>
                <p>Przepisy, dania, gotowe pomysły!</p>
            </div>
        </div>
        <div style="margin:auto;width:70%">
            <div class="form-group">
                <label for="products">Posiadane produkty:</label>
                <input type="text" class="form-control" id="products">
            </div>
            <button type="button" id="btn">testuj</button>
            <p><a href="zaloguj.html"> Aby uzyskać dodatkowe opcje zaloguj się!</a></p>
        </div>
        <div style="margin:auto; width:70%;">
            <!--
            <div class="list-group">
                <a href="#" class="list-group-item">
                    <h4 class="list-group-item-heading">Przepis numer 1</h4>
                    <p class="list-group-item-text" id="recipe"></p>
                </a>
                <a href="#" class="list-group-item">
                    <h4 class="list-group-item-heading">Przepis numer 2</h4>
                    <p class="list-group-item-text">Krótki opis przepisu</p>
                </a>
                <a href="#" class="list-group-item">
                    <h4 class="list-group-item-heading">Przepis numer 3</h4>
                    <p class="list-group-item-text">Krótki opis przepisu</p>
                </a>
            </div>
            -->
            
            <div class="panel-group" id="accordion">
                <div class="panel panel-default" ng-repeat="p in przepisy">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapse1">{{p.name}}</a>
                        </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse">
                        <div class="panel-body">{{p.desc}}</div>
                    </div>
                </div>
            </div>
        </div><!-- /.col-sm-4 -->
        <!--<script src="./przepisy2.js"></script>-->
        <script>
            var url = 'https://api.trello.com/1/search?idBoards=54ad9476179886c979b60080';
            var apiKey = '4cc334d87ada29b1884404fe3f30956a';
            
            $('#btn').click(function() {
                var cokolwiek = $("#products").val();
                
                var app = angular.module("myApp", []);
                app.controller("myCtrl", function($scope, $http) {
                    $http.get(url + '&query=' + cokolwiek + '&key=' + apiKey).then(function(response) {
                        $scope.przepisy = response.cards;
                    });
                }); 
            });
        </script>
    </body>
</html>